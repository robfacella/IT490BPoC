<?php
  //Here is where we initalize our fake users
  //initalize user stats
  //get user input on movie
  //add to user stats
  //it should automatically update movie suggestion but for now just loop until user is finished
  //check stats against stats of other users, find closest matching user
  //check found user's movies for unseen movies
  //suggest movie closest to stats
  class userProfile {
    public $weighedStats = array('Genre' =>  array(), 'Director' => array(), 'Year' => array(), 'Actors' => array());
    public $unweighedStats = array('Genre' =>  array(), 'Director' => array(), 'Year' => array(), 'Actors' => array());
    public $moviesWatched = 0;
    public $movieList = array();

    public function addMovie($newMovie, $rating){
      //iterate movie count for correct average
      $moviesWatched++;
      //add movie to list of movies
      array_push($movieList, $newMovie["Title"]);

      //seperate the genre of the new movie into an array
      $newGenres = explode(',', $newMovie['Genre']);
      //iterate through all genres to add
      foreach($unweighedStats['Genre'] as &$oldGenre){
        foreach($newGenres as $genre){
          //check if genre already exists in user stats
          //if so, add to existing array
          if ($oldGenre[0] == $genre){
            $oldGenre[1] = $oldGenre[1] + $rating;
          }
          else{
            //genre doesn't exist in stats, add
            array_push($unweighedStats['Genre'], array($genre , $rating));
          }
        }
      }

      //Same as Genre but for director
      //seperate the directors of the new movie into an array
      $newDirectors = explode(',', $newMovie['Director']);
      //iterate through all directors to add
      foreach($unweighedStats['Director'] as &$oldDirector){
        foreach($newDirectors as $director){
          //check if actor already exists in user stats
          //if so, add to existing array
          if ($oldDirector[0] == $director){
            $oldDirector[1] = $oldDirector[1] + $rating;
          }
          else{
            //director doesn't exist in stats, add
              array_push($unweighedStats['Director'], array($director, $rating));
          }
        }
      }

      //Same as Genre but for actors
      //seperate the actors of the new movie into an array
      $newActors = explode(',', $newMovie['Actors']);
      //iterate through all actors to add
      foreach($unweighedStats['Actors'] as &$oldActors){
        foreach($newActors as $actor){
          //check if actor already exists in user stats
          //if so, add to existing array
          if ($oldActors[0] == $actor){
            $oldActors[1] = $oldActors[1] + $rating;
          }
          else{
            //actor doesn't exist in stats, add
              array_push($unweighedStats['Actors'], array($actor, $rating));
          }
        }
      }
    }
  }
?>
